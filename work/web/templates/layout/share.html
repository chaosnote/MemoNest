{{define "share"}}
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    {{template "css" .}}
</head>
<body>
    <div style="width: 800px;" class="mx-auto">
        {{with .Share}}
        <div class="mt-4">
            <div class="d-flex flex-wrap gap-2 mb-2">
                {{range .MainMenu}}
                    {{if eq .Idx $.Share.MenuIdx}}
                    <span class="btn btn-primary" style="pointer-events: none; user-select: none;">{{.Label}}</span>
                    {{else}}
                    <a class="btn btn-outline-primary" href="{{.Path}}">{{.Label}}</a>
                    {{end}}
                {{end}}
                <a class="btn btn-outline-danger ms-auto" href="/api/v1/member/logout">登出</a>
            </div>
        
            {{with .SubMenu}}
            <div class="d-flex flex-wrap gap-2">
                {{range .}}
                    {{if ne .Path $.Share.CurrentPath}}
                    <a class="btn btn-sm btn-outline-secondary" href="{{.Path}}">{{.Label}}</a>
                    {{else}}
                    <span class="btn btn-sm btn-secondary" style="pointer-events: none; user-select: none;">{{.Label}}</span>
                    {{end}}
                {{end}}
            </div>
            {{end}}
        </div>
        <hr>
        {{end}}
        <div class="container">
        {{template "content" .}}
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    {{template "js" .}}
    {{with .Share}}
    <script>
        function update() {
            $.get('/update/user', function (response) {
                if (!response.hasOwnProperty('Code')) {
                    location.href = "/" ;
                    return;
                }
            }).fail(function (xhr, status, error) {
                console.error('取得資料失敗：', error);
            });
        }
        update();
        setInterval(update, 60000);
    </script>
    {{end}}
</body>
</html>
{{end}}